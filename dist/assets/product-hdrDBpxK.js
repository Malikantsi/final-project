import{s as I,f as M,a as F,u as E}from"./utils-BLfInb8w.js";document.addEventListener("DOMContentLoaded",()=>{const a=document.querySelector(".mobile-menu-btn"),c=document.querySelector(".nav-menu");a&&c?I(a,c):console.warn("Mobile menu elements not found.")});document.addEventListener("DOMContentLoaded",function(){let a=1;const c=9;let d=[],s=[];const A=document.querySelector(".products-grid"),y=document.querySelector("#prev-page"),h=document.querySelector("#next-page"),$=document.querySelector("#page-info"),f=document.querySelector("#search-input"),B=document.querySelector("#search-btn"),v=document.querySelector("#category-filter"),S=document.querySelector("#price-filter"),T=document.querySelector("#sort-by");function g(o){const t=document.createElement("div");t.className="api-alert",t.textContent=o,document.body.prepend(t),setTimeout(()=>t.remove(),3e3)}document.addEventListener("DOMContentLoaded",async function(){const o=document.querySelector(".products-grid"),t=document.getElementById("loading");t.style.display="block",o.innerHTML="";try{let r=await b();(!r||r.length===0)&&(r=P(),g("Showing demo data - API unavailable")),l(r),localStorage.setItem("cachedToys",JSON.stringify(r))}catch(r){console.error("Error:",r),l(),g("⚠️ Using offline demo data")}finally{t.style.display="none"}});async function b(){var o;return await fetch("https://scout-amazon-data.p.rapidapi.com/Amazon-Search-Data?query=toys&region=US&sort_by=RELEVANCE&page=1",{method:"GET",headers:{"X-RapidAPI-Key":"e60a9d86cemsh8b4e1f6d4cef00fp165b60jsneed46343db87","X-RapidAPI-Host":"scout-amazon-data.p.rapidapi.com"}}).then(t=>t.json()).then(t=>{o=t,t&&t.data&&(container.innerHTML=t.data.map(r=>`
                    <div >
                        <img src="${r.image}" alt="${r.title}" style="width:100%; height:auto;" />
                        <h4>True${r.title}</h4>
                        <p>Price: ${r.price}</p>
                    </div>`).join(""))}).catch(t=>console.error(t)),o.products}async function O(){const o=localStorage.getItem("cachedProducts");o&&(d=JSON.parse(o),s=[...d],l());const t=await b();t.length>0?(d=t,s=[...t],localStorage.setItem("cachedProducts",JSON.stringify(t))):(d=P(),s=[...d],g("⚠️ Using demo data - API may be unavailable")),l(),E()}function P(){return[{id:1,title:"LEGO Classic Creative Brick Box",price:29.99,description:"Build anything you can imagine with these colorful bricks!",category:"building",ageGroup:"5-8",rating:{rate:4.8,count:120},image:"images/lego-bricks.jpg",stock:35,materials:"Plastic",safetyInfo:"Non-toxic, BPA-free materials"},{id:2,title:"Cuddly Teddy Bear",price:19.99,description:"Soft and huggable teddy bear for bedtime comfort",category:"plush",ageGroup:"0-1",rating:{rate:4.5,count:85},image:"images/teddy-bear.jpg",stock:42,materials:"Plush fabric, Polyester filling",safetyInfo:"Machine washable, hypoallergenic"},{id:3,title:"Junior Scientist Kit",price:34.99,description:"Fun experiments to spark scientific curiosity",category:"educational",ageGroup:"8-12",rating:{rate:4.7,count:65},image:"images/science-kit.jpg",stock:18,materials:"Plastic, Paper",safetyInfo:"Adult supervision recommended"}]}function l(){const o=(a-1)*c,t=o+c;var r=s.slice(o,t);r=[{asin:"B0CSFPL6JN",product_title:"HEX BOTS Wall Crawler Gecko with Official Wall Climber Technology, Rechargeable Remote Control Robot Kids Toys, Prank Toys for Boys & Girls Ages 4 & Up",product_price:"$24.97",product_original_price:"$32.99",product_star_rating:"4.4",product_num_ratings:"",product_image:"https://m.media-amazon.com/images/I/81bJ65CAFIL._AC_UL320_.jpg",is_prime:!0,amount_sold:"20K+ bought in past month",delivery_info:"FREE delivery Thu, Oct 23 on $35 of items shipped by Amazon Or fastest delivery Tomorrow, Oct 19",productStatus:"Best Seller"},{asin:"B08FCRF2Q3",product_title:"Kinetic Sand Scents, Ice Cream Treats Playset with 3 Colors Scented Play Sand & 6 Tools, Sensory Toys, Holiday Gifts & Stocking Stuffers for Kids Ages 3 and up",product_price:"$9.48",product_original_price:"$15.99",product_star_rating:"4.7",product_num_ratings:"",product_image:"https://m.media-amazon.com/images/I/91M86uflhuL._AC_UL320_.jpg",is_prime:!0,amount_sold:"7K+ bought in past month",delivery_info:"FREE delivery Thu, Oct 23 on $35 of items shipped by Amazon Or fastest delivery Tomorrow, Oct 19",productStatus:"Overall Pick"},{asin:"B0BGLTYW59",product_title:"Magnetic Tiles Kids Toys STEM Magnet Toy for Toddler Magnetic Blocks Building Preschool Learning Sensory Montessori Toys for 3+ Year Old Boys and Girls, Safe Creativity Toddler Kids Toy 40PCS",product_price:"$17.98",product_original_price:"$29.98",product_star_rating:"4.8",product_num_ratings:"",product_image:"https://m.media-amazon.com/images/I/81a666v83iL._AC_UL320_.jpg",is_prime:!0,amount_sold:"10K+ bought in past month",delivery_info:"FREE delivery Thu, Oct 23 on $35 of items shipped by Amazon Or fastest delivery Mon, Oct 20",productStatus:"Best Seller"},{asin:"B0FGXMYVYQ",product_title:"Toddler Toy 10 Pcs Interactive Retriever Robot Dog Toy - Walking & Stuffed Puppy with Stethoscope for Vet Role Play, Educational Toddler Gifts for 3 Year Old Girl",product_price:"$5.99",product_original_price:"",product_star_rating:"4.3",product_num_ratings:"",product_image:"https://m.media-amazon.com/images/I/71JNAY+pJmL._AC_UL320_.jpg",is_prime:!0,amount_sold:"800+ bought in past month",delivery_info:"FREE delivery Thu, Oct 23 on $35 of items shipped by Amazon Or fastest delivery Tomorrow, Oct 19",productStatus:"New Arrival Pick"},{asin:"B0DG2VRFV7",product_title:"30 Pack Squishy Toys, Kawaii Squishies Party Favors for Kids 4-8 8-12 Treasure Box Toys for Classroom Birthday Xmas Gifts Goodie Bag Mini Animals Mochi Squishy Stress Relief Sensory Toys Random",product_price:"$7.99",product_original_price:"$9.99",product_star_rating:"4.6",product_num_ratings:"",product_image:"https://m.media-amazon.com/images/I/71HXqi9myuL._AC_UL320_.jpg",is_prime:!0,amount_sold:"20K+ bought in past month",delivery_info:"FREE delivery Thu, Oct 23 on $35 of items shipped by Amazon Or fastest delivery Tomorrow, Oct 19",productStatus:"Limited time deal"},{asin:"B01B1V10KA",product_title:"Melissa & Doug Wooden Scoop & Serve Ice Cream Counter, Pretend Play Store, 28 Toy Food & Play Kitchen Accessories, Preschool Toys for Girls & Boys 3+",product_price:"$39.97",product_original_price:"$70.99",product_star_rating:"4.9",product_num_ratings:"",product_image:"https://m.media-amazon.com/images/I/7106ox8f2jL._AC_UL320_.jpg",is_prime:!0,amount_sold:"10K+ bought in past month",delivery_info:"FREE delivery Thu, Oct 23 Or fastest delivery Tomorrow, Oct 19",productStatus:"Best Seller"},{asin:"B0FTMSQGZ4",product_title:"Chuckle & Roar The Pop It! Book: Colors",product_price:"$24.99",product_original_price:"",product_star_rating:"",product_num_ratings:"",product_image:"https://m.media-amazon.com/images/I/81HiHA9KGNL._AC_UL320_.jpg",is_prime:!0,amount_sold:"",delivery_info:"FREE delivery Nov 6 - 18 on $35 of items shipped by Amazon Or fastest delivery Nov 6 - 16",productStatus:""},{asin:"B0CP41C4QN",product_title:"POTATO HEAD Create Your Family Set with 44 Parts and Pieces, Creative Toddler and Preschool Toys for 2 Year Old Girls and Boys and Up (Amazon Exclusive)",product_price:"$19.99",product_original_price:"",product_star_rating:"4.8",product_num_ratings:"",product_image:"https://m.media-amazon.com/images/I/71+v2oqAK3L._AC_UL320_.jpg",is_prime:!0,amount_sold:"10K+ bought in past month",delivery_info:"FREE delivery Thu, Oct 23 on $35 of items shipped by Amazon Or fastest delivery Tomorrow, Oct 19",productStatus:"Best Seller"},{asin:"B0CC5GTSQF",product_title:"Goody King Magnetic Blocks |100PCS Magnetic Building Cube Game, Constructions Toys for Boys & Girls Age 3-4, 5 6 7 8 9 10, STEM Montessori Stacking Toy, Sensory Tiles Building Birthday for Toddlers",product_price:"$21.62",product_original_price:"$34.99",product_star_rating:"4.6",product_num_ratings:"",product_image:"https://m.media-amazon.com/images/I/91RR+Mh95tL._AC_UL320_.jpg",is_prime:!0,amount_sold:"3K+ bought in past month",delivery_info:"FREE delivery Thu, Oct 23 on $35 of items shipped by Amazon Or fastest delivery Tomorrow, Oct 19",productStatus:"Limited time deal"}],console.log("Fixed Product Price that was causing display errors"),A.innerHTML=r.map(e=>`
            <div class="product-card">
                <div class="product-image">
                    <img src="${e.product_image}" alt="${e.product_title}" onerror="this.src='images/placeholder-toy.jpg'">
                    <a href="/src/products/product-details.html" class="quick-view" data-id="${e.asin}">Quick View</a>
                </div>
                <div class="product-info">
                    <h3>${e.product_title}</h3>
                    <div class="product-price">${M(e.product_price.replace("$",""))}</div>
                    <div class="product-rating">
                        ${"★".repeat(Math.round(e.product_star_rating))}${"☆".repeat(5-Math.round(e.product_star_rating))} 
                        <span class="review-count">(${e.product_num_ratings})</span>
                    </div>
                    <button class="btn btn-primary add-to-cart" data-id="${e.asin}" id="${e.asin}" name="${e.asin}">
                        Add to Cart
                    </button>
                </div>
            </div>
        `).join("");const n=Math.ceil(s.length/c);$.textContent=`Page ${a} of ${n}`,y.disabled=a===1,h.disabled=a===n||n===0,document.querySelectorAll(".add-to-cart").forEach(e=>{e.addEventListener("click",w)}),document.querySelectorAll(".quick-view").forEach(e=>{e.addEventListener("click",k)})}function u(){const o=f.value.toLowerCase(),t=v.value,r=S.value,n=T.value;switch(s=d.filter(e=>{var i=e.product_price.substring(1,e.product_price.length);const p=e.product_title.toLowerCase().includes(o)||e.product_title.toLowerCase().includes(o),m=!t||e.category===t;let _=!0;if(r){const[C,L]=r.split("-").map(Number);L?_=i>=C&&i<=L:_=i>=C}return p&&m&&_}),n){case"price-low":s.sort((e,i)=>{const p=parseFloat(e.product_price.replace("$",""))||0,m=parseFloat(i.product_price.replace("$",""))||0;return p-m});break;case"price-high":s.sort((e,i)=>{const p=parseFloat(e.product_price.replace("$",""))||0,m=parseFloat(i.product_price.replace("$",""))||0;return p-m});break;case"rating":s.sort((e,i)=>i.product_num_ratings-e.product_num_ratings);break;case"newest":s.sort((e,i)=>i.asin-e.asin);break;default:s.sort((e,i)=>i.product_star_rating*i.product_num_ratings-e.product_star_rating*e.product_num_ratings);break}a=1,l()}function k(o){const t=o.target.dataset.id;window.location.href=`product-detail.html?id=${t}`}function w(o){var t=o.target.id;const r=d.find(i=>i.asin===t);try{console.log(r),F("cart",r),E()}catch(i){console.log(i)}const n=o.target,e=n.textContent;n.textContent="Added!",n.classList.add("added"),setTimeout(()=>{n.textContent=e,n.classList.remove("added")},2e3)}y.addEventListener("click",()=>{a>1&&(a--,l())}),h.addEventListener("click",()=>{const o=Math.ceil(s.length/c);a<o&&(a++,l())}),f.addEventListener("keyup",o=>{o.key==="Enter"&&u()}),B.addEventListener("click",u),v.addEventListener("change",u),S.addEventListener("change",u),T.addEventListener("change",u),O()});
